<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPI Payment</title>
</head>
<body>
    <div id="upi-link-container"></div>
    <div id="payment-status"></div>

    <script>
        // UPI Payment details
        const upiId = 'gurav15dg@okhdfcbank';
        const payeeName = 'Atharv Kumbhar';
        const amount = 1; // Set the amount here
        const currency = 'INR';

        // URL encode the payee name
        const encodedPayeeName = encodeURIComponent(payeeName);

        // Create the UPI link
        const upiLink = `upi://pay?pa=${upiId}&pn=${encodedPayeeName}&am=${amount}&cu=${currency}`;

        // Function to check payment status
        async function checkPaymentStatus(transactionId) {
            try {
                // Replace with the URL of your server-side endpoint
                const response = await fetch(`https://your-vercel-project.vercel.app/api/verify-payment?transactionId=${transactionId}`);
                const status = await response.text();
                document.getElementById('payment-status').innerText = status;
            } catch (error) {
                console.error('Error checking payment status:', error);
                document.getElementById('payment-status').innerText = 'Error checking payment status.';
            }
        }

        // Simulate getting a transactionId (in real scenarios, this would be provided by the UPI system)
        const transactionId = '417297807298'; // Replace with actual transaction ID

        // Create the anchor element
        const anchor = document.createElement('a');
        anchor.href = upiLink;
        anchor.textContent = `Pay Rs. ${amount} to ${payeeName}`;
        anchor.target = "_blank"; // Open link in new tab
        anchor.onclick = function() {
            setTimeout(() => {
                checkPaymentStatus(transactionId);
            }, 3000); // Delay to simulate payment processing
        };

        // Add the anchor to the container
        const container = document.getElementById('upi-link-container');
        container.appendChild(anchor);
    </script>
</body>
</html>
